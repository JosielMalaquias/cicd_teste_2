name: ServiceNow CI/CD Instance Scan

on:
  push:
    branches: [master]
  pull_request:
    branches: [master]
  workflow_dispatch:

jobs:
  scan-app:
    name: Scan App
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      
      - name: ServiceNow CI/CD Instance Scan
        # Usando a sua versão específica
        uses: ServiceNow/sncicd-instance-scan@3acee37296d42bfafcb50cb04253409a83b42c44
        id: scan
        
        # Bloco 'with:' para os PARÂMETROS DE SCAN (como o 2º erro exigiu)
        with:
          scantype: 'suite_update'
          suiteSysId: 532840af20a70110fa9b96e15935cc77
          updateSetSysIds: 24b462f19380321046e4ff8ddd03d622
        
        # Bloco 'env:' para as CREDENCIAIS (como o 1º erro exigiu)
        env:
          nowScanInstance: ${{ secrets.NOW_SCAN_INSTANCE }}
          nowUsername: ${{ secrets.NOW_USERNAME }}
          nowPassword: ${{ secrets.NOW_PASSWORD }}
